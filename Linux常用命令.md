**Linux常用命令**

- **文件管理**

  - **ls**

    - | -a   | 显示所有文件及目录 (包括以“.”开头的隐藏文件)     |
      | ---- | ------------------------------------------------ |
      | -l   | 使用长格式列出文件及目录信息                     |
      | -r   | 将文件以相反次序显示(默认依英文字母次序)         |
      | -t   | 根据最后的修改时间排序                           |
      | -A   | 同 -a ，但不列出 “.” (当前目录) 及 “..” (父目录) |
      | -S   | 根据文件大小排序                                 |
      | -R   | 递归列出所有子目录                               |

  - **mkdir**

    - -p 递归创建多级目录

      ```linux
      mkdir -p linuxcool/dir
      ```

    - -m 建立目录同时设置目录的权限

      ```
      mkdir -m 700 /usr/linuxcool/dir
      ```

  - **cp**

    | -f   | 若目标文件已存在，则会直接覆盖原文件                         |
    | ---- | ------------------------------------------------------------ |
    | -i   | 若目标文件已存在，则会询问是否覆盖                           |
    | -p   | 保留源文件或目录的所有属性                                   |
    | -r   | 递归复制文件和目录                                           |
    | -d   | 当复制符号连接时，把目标文件或目录也建立为符号连接，并指向与源文件或目录连接的原始文件或目录 |
    | -l   | 对源文件建立硬连接，而非复制文件                             |
    | -s   | 对源文件建立符号连接，而非复制文件                           |
    | -b   | 覆盖已存在的文件目标前将目标文件备份                         |
    | -v   | 详细显示cp命令执行的操作过程                                 |
    | -a   | 等价于“dpr”选项                                              |

  - **mv**

    | -i   | 若存在同名文件，则向用户询问是否覆盖                         |
    | ---- | ------------------------------------------------------------ |
    | -f   | 覆盖已有文件时，不进行任何提示                               |
    | -b   | 当文件存在时，覆盖前为其创建一个备份                         |
    | -u   | 当源文件比目标文件新，或者目标文件不存在时，才执行移动此操作 |

    将文件file_1重命名为file_2：

    ```
    [root@linuxcool ~]# mv file_1 file_2
    ```

    将文件file移动到目录dir中 ：

    ```
    [root@linuxcool ~]# mv file /dir
    ```

  - **cd**

    - cd ..
    - cd /
    - cd ~
    - cd -

- **文档编辑**

  - **cat**

    | -n   | 显示行数（空行也编号）         |
    | ---- | ------------------------------ |
    | -s   | 显示行数（多个空行算一个编号） |
    | -b   | 显示行数（空行不编号）         |
    | -T   | 隐藏制表符                     |

  - **less**

    - p 上一行
    - n 下一行
    - b 上一页
    - f 下一页
    - u 上半页
    - d 下半页
    - Q 退出less命令

  - **head**

    - head -5 stodi.sh 查看前五行内容 （默认是显示10行）

  - **tail**

    - tail -5 stodi.sh 查看后五行内容(默认是显示10行)

  - **rm**

    - rm a b c 同时删除abc三个文件
    - rm -r 递归删除
    - rm -f 强制删除
    - rm -i 询问是否删除

  - **ln**

    | -b   | 为每个已存在的目标文件创建备份文件                   |
    | ---- | :--------------------------------------------------- |
    | -d   | 此选项允许“root”用户建立目录的硬链接                 |
    | -f   | 强制创建链接，即使目标文件已经存在                   |
    | -n   | 把指向目录的符号链接视为一个普通文件                 |
    | -i   | 交互模式，若目标文件已经存在，则提示用户确认进行覆盖 |
    | -s   | 对源文件建立符号链接，而非硬链接                     |
    | -v   | 详细信息模式，输出指令的详细执行过程                 |

    ```
    ln /root/dir/file.txt ./file1
    ```

    ```
    ln -s file.txt f
    ```

    ```
    ln -b /root/dir/file.txt ./file_1
    ls
    file_1  file_1~ dir
    ```

  - **cut**

    | **-c** | 以字符为单位进行分隔                                |
    | ------ | --------------------------------------------------- |
    | -d     | 自定义分隔符                                        |
    | -f     | 显示指定字段的内容，与-d一起使用                    |
    | -n     | 取消分隔多字节字符                                  |
    | -b     | 以字节为单位进行分隔  （-c 字符，-b 字节，-f 字段） |

    ```
    cut -c 2-4 name.txt  剪切name.txt文件每行2-4的字符打印出来
    ```

    ```
    cut -f 2 student.txt
    ```

    ```
    # student2.txt
    No;Name;Mark;Percent 
    01;tom;69;91 
    02;jack;71;87 
    03;alex;68;98 
    ```

    ```
    cut -f 2 -d ";" student2.txt
    ```

  - **grep过滤**

    语法：grep 【参数】pattern【file】

    | -i   | 搜索时，忽略大小写                                         |
    | ---- | ---------------------------------------------------------- |
    | -c   | 只输出匹配行的数量                                         |
    | -l   | 只列出符合匹配的文件名，不列出具体的匹配行                 |
    | -n   | 列出所有的匹配行，显示行号                                 |
    | -h   | 查询多文件时不显示文件名                                   |
    | -s   | 不显示不存在、没有匹配文本的错误信息                       |
    | -v   | 显示不包含匹配文本的所有行                                 |
    | -w   | 匹配整词                                                   |
    | -x   | 匹配整行                                                   |
    | -r   | 递归搜索                                                   |
    | -q   | 禁止输出任何结果，已退出状态表示搜索是否成功               |
    | -b   | 打印匹配行距文件头部的偏移量，以字节为单位                 |
    | -o   | 与-b结合使用，打印匹配的词据文件头部的偏移量，以字节为单位 |

  - **管道符|**

    - 命令1|命令2

      - 命令1执行后的的结果通过管道符传递给命令2

      ```
      find / -name 'mei*' | grep 'name'
      ```

  - **重定向**

    - 标准输入：stdin  0

    - 标准输出：stdout 1

    - 标准错误：stderr 2

      ```
      >和>>的区别
      	>以覆盖形式添加
      	>>最后一行添加
      ```

      ```
      标准输出和错误重定向：
      	若正确和错误都输出到一个文件，在后面加上“2>&1或者2>>&1"
      	sh test.sh>out1 2>&1
      ```

- **系统管理**

  - **rpm**

    | -a            | 查询所有的软件包                                 |
    | ------------- | ------------------------------------------------ |
    | -b或-t        | 设置包装套件的完成阶段，并指定套件档的文件名称； |
    | -c            | 只列出组态配置文件，本参数需配合”-l”参数使用     |
    | -d            | 只列出文本文件，本参数需配合”-l”参数使用         |
    | -e或--erase   | 卸载软件包                                       |
    | -f            | 查询文件或命令属于哪个软件包                     |
    | -h或--hash    | 安装软件包时列出标记                             |
    | -i            | 显示软件包的相关信息                             |
    | --install     | 安装软件包                                       |
    | -l            | 显示软件包的文件列表                             |
    | -p            | 查询指定的rpm软件包                              |
    | -q            | 查询软件包                                       |
    | -R            | 显示软件包的依赖关系                             |
    | -s            | 显示文件状态，本参数需配合”-l”参数使用           |
    | -U或--upgrade | 升级软件包                                       |
    | -v            | 显示命令执行过程                                 |
    | -vv           | 详细显示指令执行过程                             |

  - **find**

    - 语法格式：

      find 【路径】 【参数】 【查找和搜索范围】

      | -name  | 按名称查找 |
      | ------ | ---------- |
      | -size  | 按大小查找 |
      | -user  | 按属性查找 |
      | -type  | 按类型查找 |
      | -iname | 忽略大小写 |

- **磁盘管理**

  - **df  显示磁盘空间使用情况**
  - **fdisk   磁盘分区**
  - **hdparm    显示与设定磁盘参数**
  - **lsblk 查看系统磁盘**
  - **du 目录使用空间（disk usage）**

- **进程**

  - **ps**
  - **ps aux**  ：查看最想用户的所有进程
  - ax：表示所有
    - u：suer-oriented 面向用户

  - **ps -ef:**

    - -e:显示所有进程
    - -f：显示完整的输出（full—format）

  - **pstree：**进程树

  - **前后台切换：**

    - 在命令后面加&表示命令在后台运行,一般执行时间长的 ，比如备份数据库

      ```
      vi atc.txt&
      ```

    - jobs：列出后台进程

      | -l   | 显示作业列表时包括进程号             |
      | ---- | ------------------------------------ |
      | -n   | 显示上次使用jobs后状态发生变化的作业 |
      | -p   | 显示作业列表时仅显示其对应的进程号   |
      | -r   | 仅显示运行的（running）作业          |
      | -s   | 仅显示暂停的（stopped）作业          |

    - fg [number]：将后台进程调到前台执行

      - number:为后台进程号

    - 挂起：Ctrl+Z

    - bg：让停止的进程在后台执行

    - <img src="C:\Users\86791\AppData\Roaming\Typora\typora-user-images\image-20200520112011901.png" alt="image-20200520112011901" style="zoom: 25%;" />

- **压缩**

  - **tar**

    - 语法：tar 参数 压缩成的包名 要压缩的目录或文件

      - tar -zcvf alltext.tar.gz *.txt

        | 参数 | 说明                                            |
        | ---- | ----------------------------------------------- |
        | x    | 解压时使用（extract）                           |
        | c    | 创建压缩（create）                              |
        | v    | 提示信息（verbose：表示冗余，会提示操作的细节） |
        | f    | 指定归档文件（file，放在最后面，必须要的）      |
        | z    | 使用gzip的方式压缩文件                          |
        | j    | 使用bzip2的方式压缩文件                         |
        | t    | 列出备份文件的内容                              |

      - 不使用z，j命令只是对文件或目录打包，并不压缩
        - 压缩：
          - tar zcvf alltext.tar.gz *.txt test/
          - tar jcvf alltext.tar.gz2 *.txt test/
        - 解压
          - tar zxvf talltext.tar.gz test/
          - tar jxvf talltext.tar.bz2 test/

  - **gzip**

  - **bzip2**

  - **rar**

  - **zip**

- **安装与卸载**

  - **源码安装**

    1. 下载：wget -c url 下载代码安装包   （-c：continue）
    2. tar包解压：解压到指定目录/usr/src
    3. ./configure配置：
    4. make编译：生成可执行的二进制文件Makefile
    5. makeinstall安装：

  - **红帽派（Redhat Centos Fedora）安装**

    - **在线安装（yum**）：

      1. 安装前工具：yum -y install gcc gcc-c++ make

      2. 列出以安装的包：yum list installed

      3. 查看特定的包是否安装：yum list 包名

      4. 安装软件：yum install 包名

      5. 卸载：

         - yum remove 包名：只删除软件包而保留配置文件和数据文件

         - yum erase 包名：删除软件和它所有的文件

      6. 更新：

         - 全部更新：yum list update
         - 单独更新：yum update 包名

    - **本地安装（rpm）安装：**

      | -qa       | 查询所有已安装的rpm包信息，列出包的版本（a=all，q=query）    |
      | --------- | ------------------------------------------------------------ |
      | -q        | 查询包是否安装                                               |
      | -i        | 显示相关信息                                                 |
      | --install | 安装软件包                                                   |
      | -qc       | 查看配置文件（config）                                       |
      | -ql       | 查看包所不包含的文件                                         |
      | -v        | 显示过程                                                     |
      | -h        | 表示以“#”作为进度条                                          |
      | -e        | 表示包的卸载(erase)                                          |
      | -l        | 显示包的文件里诶包                                           |
      | -p        | 查询制定rpm软件                                              |
      | -U        | 升级软件包                                                   |
      | --nodeps  | 当要安装的包依赖其他包时，即使其他包没有安装，也要安装这个包 |
      | --force   | 即使覆盖属于其他包的文件也要安装                             |

    - **参考实例**

      直接安装软件包：

      ```
      [root@linuxcool ~]# rpm -ivh packge.rpm 
      ```

      忽略报错，强制安装：

      ```
      [root@linuxcool ~]# rpm --force -ivh package.rpm
      ```

      列出所有安装过的包：

      ```
      [root@linuxcool ~]# rpm -qa
      ```

      查询rpm包中的文件安装的位置：

      ```
      [root@linuxcool ~]# rpm -ql ls
      ```

      卸载rpm包：

      ```
      [root@linuxcool ~]# rpm -e package.rpm 
      ```

      升级软件包：

      ```
      [root@linuxcool ~]# rpm -U file.rpm
      ```

  - **Debian派（Kali Ubuntu Mint）安装**

    - 在线安装：

      - apt或apt-get

        | apt-get install 软件名 | 安装                                           |
        | ---------------------- | ---------------------------------------------- |
        | apt-get update         | 升级软件                                       |
        | apt-get upgrade        | 升级可更新的所有软件包，但存在依赖问题的不升级 |
        | apt-get dis-upgrade    | 升级并解决依赖问题                             |
        | apt-get remove         | 删除软件包                                     |

        | -y                 | 自动回应是否安装软件包的选项，在一些自动化安装脚本中使用这个参数将十分有用 |
        | ------------------ | ------------------------------------------------------------ |
        | -q                 | 静默安装                                                     |
        | -s                 | 模拟安装                                                     |
        | -f                 | 修复损坏的依赖关系                                           |
        | -d                 | 只下载不安装     apt-get install -d emacs                    |
        | --reinstall        | 重新安装已经安装但可能存在问题的软件包   apt-get --reinstall install w3m |
        | --install-suggests | 同时安装APT给出的建议安装的软件包                            |

        

      - aptitude

        | aptitude install package_name | 安装软件包               |
        | ----------------------------- | ------------------------ |
        | aptitude search package_name  | 查找软件包               |
        | aptitude remove package_name  | 只删除软件不删除配置文件 |
        | aptitude purge package_name   | 全部删除                 |

    - 本地安装dpkg：

      | -i   | 安装软件包                     |
      | ---- | ------------------------------ |
      | -r   | 删除软件包                     |
      | -l   | 显示已安装软件列表             |
      | -L   | 显示于软件包关联的文件         |
      | -c   | 显示软件包内文件列表           |
      | -S   | 搜索已安装的软件包             |
      | -I   | 显示deb包文件的信息（大写的i） |
      |      |                                |

- **定时器**

  **一次性计划任务at**

  | atq   | 查看系统中的等待作业                   |
  | ----- | -------------------------------------- |
  | at -d | 删除系统中的等待作业（等效于atrm命令） |
  | at -c | 打印任务的内容                         |
  | at -q | 使用指定的队列                         |
  | at -f | 将指定文件提交等待作业                 |
  | at -t | 以时间形式提交运行作业                 |

  **参考实例**

  查看系统中的等待作业： 

  ```
  [root@linuxcool ~]# atq
  ```

  使用”at -d”或者”atrm”(二者同效)指定id来删除系统中的等待作业，id为”atq”命令输出的第一行顺序数字：

  ```
  [root@linuxcool ~]# at -d 1
  [root@linuxcool ~]# atrm 1 
  ```

  假设存在 linuxcool.sh 脚本，立即运行：

  ```
  [root@linuxcool ~]# at -f linuxcool.sh now
  ```

  在25分钟之后运行 linuxcool.sh 脚本：

  ```
  [root@linuxcool ~]# at -f linuxcool.sh now+25 min
  ```

  在10:11运行 linuxcool.sh 脚本：

  ```
  [root@linuxcool ~]#  at -f linuxcool.sh 10:11
  ```

  在2019年7月27日运行 linuxcool.sh 脚本：

  ```
  [root@linuxcool ~]#  at -f linuxcool.sh 07/27/2019
  ```

  **定时任务：**

  | -e     | 编辑该用户的计时器设置                       |
  | ------ | -------------------------------------------- |
  | -l     | 列出该用户的计时器设置（查看有哪些定时任务） |
  | -r     | 删除该用户的计时器设置（remove)              |
  | -u     | 指定要设定计时器的用户名称                   |
  | --help | 显示帮助信息                                 |

  **crontab格式：**minute   hour   day   month   week   command     顺序：分 时 日 月 周 命令 

  <img src="C:\Users\86791\AppData\Roaming\Typora\typora-user-images\image-20200520151250719.png" alt="image-20200520151250719" style="zoom:50%;" />

  - 每分钟执行一次
    ```
    * * * * * command
    ```

  - 每分钟执行两次

    ```
    */2 * * * * command
    ```

  - 每小时的第3分钟和第15分钟执行

    ```
    3,15 * * * * command
    ```

  - 每小时的第3分钟到第15分钟执行

    ```
    3-15，* * * * command
    ```

  - 上午的8点到11点的第3分钟和第15分钟执行

    ```
    3,15 8-11 * * * command
    ```

  - 每晚的21点执行

    ```
    30 21 * * * command
    ```

    

- **vim编辑器**

  - **输入模式**

    - a（ahead）：在光标之后插入

    - A：在当前行尾插入

      

    - i（inside）：在光标所在位置插入

    - I：在光标所在行尾插入

      

    - o（lastrow）：在下一行插入

    - O：在前一行插入

      

    - r（replace）：代替当前字符

    - R：替换当前字符及其后的字符，知道按下ESC

      

    - s：修改一个字符

    - S：修改当前行的内容

    - nS：删除光标所在行开始n-1行内容，并以所输入的文本替换

      

    - **删除：**

      - x：删除光标所在的字符

      - dw：删除光标所在的位置到下一个单词之间的所有字符（delete word）

      - ndw：删除光标处开始到其后的n-1个单词

        

      - dd：删除当前行

      - ndd：删除当前行及其后面的n-1行

        

      - d0：删除至行首

      - d$：删除至行尾

      - dgg：删除光标所在行和前面的所有内容

      - dG：删除光标所在行和后面的所有内容

  - **命令模式**
    - **移动**
      - **单词**
        - w/W:移动到下一个单词的开头
        - b/B：移动到上一个单词的开头
        - e/E：移动到下一个单词的最后一个字母
      - **行**
        - 0/^：移动到行首
        - $：移动到行尾
      - **句段**
        - （：移动到句首
        - ）：移动到句尾
        - {：移动到段首
        - }：移动到断尾
      - **屏幕**
        - H：移动到顶行
        - M：移动到屏幕中间行
        - L：移动到屏幕最后喊
        - **查看**
          - Ctrl+f：下一页
          - Ctrl+b：上一页
          - Ctrl+d：下半页
          - Ctrl+u：上半页
      - **文件**
        - gg：移动到文件头
        - G：移动到文件尾
    - **复制粘贴**
      - yy：复制当前行
      - yw：复制所在字符的单词
      - y0：复制到行首
      - y&：赋值到行尾
      - nyy：赋值光标及n-1行
      - p：粘贴（paste）
      - np：粘贴n次
  - **编辑模式：**
    - set nu:设置行号
    - :w  保存
    - :q 退出
    - :wq=x  保存退出
    - /  从光标开始向下搜索            （ n：跳下一个 N：跳上一个）
    - ？ 从光标开始向上搜索
    - **替换**
      - s/c1/c2/g  :  将当前行的字符“c1”全部替换为字符”c2“
      - n1,n2s/c1/c2/g : 将n1到n2行的所有字符“c1”替换为“c2”
      - g/c1/c2/g:将文件中的所有字符“c1”替换为字符“c2”
      - %s/c1/c2/g=g/c1/c2/g
    - **拷贝**
      - n1,n2 co n3 : 将n1到n2内容拷贝到n3行下
    - **移动**
      - n1,n2 m n3: 将n1到n2内容移动n3行下
    - **删除：**
      - n1,n2 d ： 将n1到n2之间的内容删除